# 粘包

粘包问题是指数据在传输时，在一条消息中读取到了另一条消息的部分数据，这种现象就叫做粘包。

比如发送了两条消息，分别为“ABC”和“DEF”，那么正常情况下接收端也应该收到两条消息“ABC”和“DEF”，但接收端却收到的是“ABCD”，像这种情况就叫做粘包。

# 半包/拆包

半包也叫拆包，是指接收端只收到了部分数据，而非完整的数据包。

比如发送了一条消息是“ABC”，而接收端却收到的是“AB”和“C”两条信息，这种情况就叫做半包。

# 解决方案

首先需要了解，粘包和半包问题发生在 TCP/IP 协议中，因为 TCP 是面向连接的传输协议，它是以“流”的形式传输数据的，而“流”数据是没有明确的开始和结尾边界的，所以就会出现粘包和半包问题。

常见的解决方案有以下 3 种：
+ 发送方和接收方固定发送数据的大小，当字符长度不够时用空字符弥补，有了固定大小之后就知道每条消息的具体边界了
+ 在 TCP 协议的基础上封装一层自定义数据协议，在自定义数据协议中，包含数据头（存储数据的大小）和 数据的具体内容，这样服务端得到数据之后，通过解析数据头就可以知道数据的具体长度了
+ 以特殊的字符结尾，比如以“\n”结尾，这样我们就知道数据的具体边界了（推荐方案）

------
摘自：
+ [Java中文社群](https://juejin.cn/post/7126869525962129438)

站长略有修改